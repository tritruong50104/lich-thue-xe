<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lá»‹ch ThuÃª Offline</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#111">
<style>
body{margin:0;font-family:-apple-system;background:#f5f5f5}
header{background:#111;color:#fff;padding:12px;text-align:center}
.view{padding:10px}
.day{background:#ddd;padding:10px;border-radius:8px;margin-bottom:6px}
.booked{background:#4caf50;color:#fff;margin-top:4px;padding:4px;border-radius:4px}
button,select,input{width:100%;padding:10px;margin-top:6px}
.mode{position:fixed;bottom:10px;left:10px;right:10px}
</style>
</head>
<body>
<header>ðŸ“… Lá»ŠCH THUÃŠ (OFFLINE)</header>
<div class="view" id="view"></div>
<div class="mode">
  <button onclick="setMode('day')">NgÃ y</button>
  <button onclick="setMode('week')">Tuáº§n</button>
  <button onclick="setMode('month')">ThÃ¡ng</button>
</div>
<script>
let mode='day';
let data=JSON.parse(localStorage.getItem('rent')||'{}');
function setMode(m){mode=m;render();}
function render(){
 let el=document.getElementById('view');el.innerHTML='';
 let today=new Date();
 let days= mode==='day'?1: mode==='week'?7:new Date(today.getFullYear(),today.getMonth()+1,0).getDate();
 for(let i=0;i<days;i++){
  let d=new Date();d.setDate(today.getDate()+i);
  let ds=d.toISOString().slice(0,10);
  let box=document.createElement('div');
  box.className='day';
  box.innerHTML=ds;
  box.onclick=()=>add(ds);
  for(let v in data){
    if(data[v][ds]){
      let b=document.createElement('div');
      b.className='booked';
      b.innerText=v+': '+data[v][ds];
      box.appendChild(b);
    }
  }
  el.appendChild(box);
 }
}
function add(d){
 let v=prompt('Xe (Xe 1-4):','Xe 1');
 if(!v)return;
 data[v]=data[v]||{};
 if(data[v][d] && !confirm('Xe Ä‘Ã£ cÃ³ khÃ¡ch, ghi Ä‘Ã¨?'))return;
 data[v][d]=prompt('TÃªn khÃ¡ch:','KhÃ¡ch');
 localStorage.setItem('rent',JSON.stringify(data));
 render();
}
render();
</script>
<script>
if('serviceWorker'in navigator){navigator.serviceWorker.register('sw.js');}
</script>
</body>
</html>